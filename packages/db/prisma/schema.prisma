// Prisma schema for the monitoring system
// Add Monitor and Job models as per requirements

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Monitor {
  id              String   @id @default(cuid())
  url             String
  method          String
  intervalSeconds Int
  nextRunAt       DateTime
  jobs            Job[]
}

model Job {
  id        String   @id @default(cuid())
  monitorId String
  type      String
  status    String   @default("pending")
  payload   Json
  runAt     DateTime
  createdAt DateTime @default(now())

  Monitor Monitor @relation(fields: [monitorId], references: [id])

  @@index([status, runAt])
}
